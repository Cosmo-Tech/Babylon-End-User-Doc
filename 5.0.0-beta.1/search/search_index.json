{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Discover Babylon","text":"<p>Welcome to the End User Documentation of Babylon</p> <p>This documentation will guide you on your learning adventure with Babylon.</p>"},{"location":"#what-is-babylon","title":"What is Babylon ?","text":"<p>Babylon is a <code>CLI[^1]</code> principally targeted at Devops users of the Cosmo Tech Platform. It allows the user to interact with the multiple systems used in the platform, performing multiple operations in a simple and streamlined fashion.</p> <p>Instead of requiring the user to learn how to use numerous software to interact with the systems, Babylon allows you to learn a single format.</p>"},{"location":"#why-babylon","title":"Why Babylon ?","text":"<p>Babylon was developed to help users getting around the difficulty of juggling around with multiple softwares to interact with the multiple systems composing the Cosmo Tech Platform.</p> <p>By using Babylon you only need one single software to work on your multiple needs.</p> <p>The team behind Babylon is closely tied to the one working on the Cosmo Tech Platform, and new features of the platform can quickly be added to Babylon allowing users to get fast access to the newest content.</p>"},{"location":"#still-not-convinced","title":"\ud83e\udd14 Still not convinced ?","text":"<p>Why should you care</p> <p>Babylon is more than a CLI it's a framework It not only gives you access to low-level commands (direct interaction with a single system), but also provides high-level commands that allow automation of entire processes.  </p> <p>This reduces the risk of human errors. This saves time when dealing with complex workflows.  </p>"},{"location":"#macro-commands","title":"\ud83d\udd11 Macro Commands","text":"<p>Automation made simple</p> <p>Babylon introduces <code>Macro Commands[^2]</code>: combinations of low-level commands bundled into one simple instruction.  </p> <p>\ud83d\udc49 With Macro Commands, you can automate complex operations in a safer and faster way.  </p> <ol> <li> <p>Command Line Interface (CLI): A software used in a terminal console, allowing to run commands.\u00a0\u21a9</p> </li> <li> <p>Macro Commands: A combination of low level commands allowing to do complex operation in a high level manner.\u00a0\u21a9</p> </li> </ol>"},{"location":"Licence/","title":"License","text":"<p>MIT License</p> <p>Copyright \u00a9 2021\u20132025 Cosmo Tech</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction,including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>\u26a0\ufe0f Disclaimer  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE</p>"},{"location":"Examples/","title":"Examples","text":"<p>A collection of examples to get started with Babylon v5 for deploying and updating workspaces</p> <p> Example: Deploying a Cosmo Tech Workspace</p> <p>This guide provides an example on how to deploy a workspace using Babylon v5.</p> <p> Deploy</p> <p> Example: Updating a Cosmo Tech Workspace</p> <p>This guide explains how to update a Cosmo Tech workspace.</p> <p> Udpate</p>"},{"location":"Examples/Example_Deploy_CosmoTech_workspace/","title":"Deploy Cosmo Tech workspace","text":"<p>Make sure your Python virtual environment is set up correctly see \ud83d\udc49 Install.</p> <p>After that, you need to create a test folder, for example:</p> <pre><code>mkdir test-babylon &amp;&amp; cd test-babylon\n</code></pre>"},{"location":"Examples/Example_Deploy_CosmoTech_workspace/#set-kubernetes-context","title":"Set Kubernetes Context","text":"<p>Check your current Kubernetes context and switch to the correct one:</p> <p>Example</p> <pre><code>&gt; kubectl config current-context\ndev-aks\n\n&gt; kubectl config use-context prod-aks\nSwitched to context \"prod-aks\"\n\n&gt; kubectl config current-context\nprod-aks\n</code></pre>"},{"location":"Examples/Example_Deploy_CosmoTech_workspace/#set-up-babylon-context","title":"Set up Babylon Context","text":"<pre><code>babylon namespace use -c test -t dev -s 73a90433\n</code></pre>"},{"location":"Examples/Example_Deploy_CosmoTech_workspace/#initialization-babylon-project","title":"Initialization Babylon project","text":"<p>With Babylon v5, you can now generate a minimal manifest YAML file that can be used to test Babylon.</p> <p>Example</p> <p><pre><code>&gt; babylon init\nINFO     2025-10-24 09:54:53,853 | \n    [babylon] Project successfully initialized at: ~/CosmoTech/DevOps/babylon_v5_dir/test-babylon/project\n</code></pre> <pre><code>    .\n    \u251c\u2500\u2500 babylon.error\n    \u251c\u2500\u2500 babylon.log\n    \u251c\u2500\u2500 project\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 Dataset.yaml\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 Organization.yaml\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 Runner.yaml\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 Solution.yaml\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 Workspace.yaml\n    \u251c\u2500\u2500 customers.csv\n    \u2514\u2500\u2500 variables.yaml\n</code></pre></p>"},{"location":"Examples/Example_Deploy_CosmoTech_workspace/#start-deployment","title":"Start Deployment","text":"<p>Now, we can start running the Babylon command to deploy the workspace.</p> <p>Here is an example of <code>variables.yaml</code> with detailed explanations:</p> <p>variable.yam</p> <pre><code># =========================================================\n# IMPORTANT: You can add variables here as needed!\n# Make sure they are used in the manifest YAML.\n# =========================================================\n# Organization\norganization_name: to_fill                                              # Should be the name of the project like \"project1 organization\"\n\n# Workspace\nworkspace_name: to_fill                                                 # Should be the name of the project like \"project1 workspace\"\nworkspace_key: to_fill                                                  # Unique key to define according to your naming convention, for example: project1workspace1\nworkspace_description: to_fill                                          # Quick sentence to explain the purpose of the workspace\n\n# Solution\nsolution_name: to_fill                                                  # Should be the name of the project like \"project1 solution\"\nsolution_key: to_fill                                                   # Unique key to define according to your naming convention, for example: project1solution1\nsolution_description: to_fill                                           # Quick sentence to explain the purpose of the solution\nsimulator_repository: to_fill                                           # To fill according to your simulator name\nsimulator_version: to_fill                                              # To fill according to your simulator version\n# Dataset \ndataset_name: to_fill\ndataset_description: to_fill\n# Runner \nrun_template_id: to_fill\nrunner_name: to_fill\nrunTemplate_name: to_fill\nowner_name: to_fill\n# Security\n# The list below will be used on all API objects.\n# If differents security list are needed for each API objects,\n# you can copy/paste this list, and edit {{security_&lt;object&gt;}}\n# in files organization.yaml, solution.yaml and workspace.yaml\nsecurity:                                                                   \n  default: none                                                            \n    accessControlList:                                                        \n    - id: admin.user@example.com                                             # Example of admin user\n        role: admin                                                          \n    - id: editor.user@example.com                                            # Example of editor user\n        role: editor                                                         \n    - id: viewer.user@example.com                                            # Example of viewer user\n        role: viewer                                                         \n</code></pre> <p>As a best practice, it is recommended to create a <code>.env</code> file at the same level as the <code>variable.yaml</code> file containing the deployment commands. This allows you to easily update the workspace in the future by reusing or modifying the commands without retyping them.</p> <p>Tree</p> <pre><code>\u251c\u2500\u2500 variables.yaml\n\u251c\u2500\u2500 .env         # &lt;--- \n\u251c\u2500\u2500 .gitignore   # add .env  babylon.*\n\u251c\u2500\u2500 project\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 organization.yaml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 solution.yaml\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 workspace.yaml\n\u2514\u2500\u2500 README.md\n</code></pre> <p>Example</p> <p><pre><code>source .venv/bin/activate\n</code></pre> <pre><code>babylon namespace use -c test -t dev -s 73a90433\n</code></pre> <pre><code>babylon apply --organization project/\n</code></pre> <pre><code>babylon apply --solution project/\n</code></pre> <pre><code>babylon apply --workspace project/\n</code></pre> <pre><code>babylon apply --dataset project/\n</code></pre> <pre><code>babylon apply --runner project/\n</code></pre></p> <p>Here are some simple commands you can use if needed:</p> <p>Example</p> <p><pre><code>babylon api solutions create o-d2yrojeplmo test-api/Solution.yaml\n</code></pre> <pre><code>babylon api organizations delete o-d2yrojeplmo\n</code></pre> <pre><code>babylon api workspaces security get-all\n</code></pre> <pre><code>babylon api runners delete o-d2yrojeplmo w-5zompvvrg0j r-mdlq0mk0jo5\n</code></pre></p> <p>It is recommended to use <code>babylon --help</code> to get more details about the arguments of each command.</p> <p>Example</p> <pre><code>&gt; babylon api organizations delete --help\n\nUsage: babylon api organizations delete [OPTIONS] ORGANIZATION_ID\n\nDelete a specific organization\n\nArgs:\n\n    ORGANIZATION_ID: The unique identifier of the organization\n\nOptions:\n-c, --context TEXT   Context Name without any special character\n-t, --tenant TEXT    Tenant Id without any special character\n-s, --state-id TEXT  State Id\n-D                   Force Delete\n--help               Show this message and exit.\n</code></pre>"},{"location":"Examples/Example_Update_CosmoTech_workspace/","title":"Update Cosmo Tech workspace","text":"<p>Remember</p> <p>we assumed that the workspace already deployed we need just to update some configuration so this guide we show beast practic to do this with all use cases!</p>"},{"location":"Examples/Example_Update_CosmoTech_workspace/#modifying-access-control-lists-in-api-objects","title":"Modifying Access Control Lists in API Objects","text":"<p>Assuming you need to add users to the access control lists for the Organization, Solution, and Workspace, here is how you can do it:</p> <p>Go to the workspace repository, open the project, and then edit the <code>variables.yaml</code> file. In this example, we add users <code>Alice.Alice.@email.com</code> and <code>Bob.Bob@email.com</code>.</p> <p>variables.yaml</p> <pre><code>organization_security:\n  default: none\n  accessControlList:\n    - id: admin.user@example.com\n      role: admin\n    - id: editor.user@example.com\n      role: editor\n    - id: viewer.user@example.com\n      role: viewer\n    - id: alice.alice.@email.com   # add Alice user as editor\n      role: editor\n    - id: bob.bob@email.com    # add Bob user as viewer\n      role: viewer\n\nsolution_security:\n  default: none\n  accessControlList:\n    - id: admin.user@example.com\n      role: admin\n    - id: editor.user@example.com\n      role: editor\n    - id: viewer.user@example.com\n      role: viewer\n    - id: alice.alice.@email.com   # add Alice user as editor\n      role: editor\n    - id: bob.bob@email.com    # add Bob user as viewer\n      role: viewer\n\nworkspace_security:\n  default: none\n  accessControlList:\n    - id: admin.user@example.com\n      role: admin\n    - id: editor.user@example.com\n      role: editor\n    - id: viewer.user@example.com\n      role: viewer\n    - id: alice.alice.@email.com   # add Alice user as editor\n      role: editor\n    - id: bob.bob@email.com   # add Bob user as viewer\n      role: viewer\n</code></pre>"},{"location":"Examples/Example_Update_CosmoTech_workspace/#applying-babylon-commands","title":"Applying Babylon Commands","text":"<p>After making the necessary modifications, you can now apply the changes using Babylon commands.</p> <p>Babylon Apply</p> <p><pre><code>source .venv/bin/activate\n</code></pre> <pre><code>babylon namespace use -c test -t dev -s 73a90433\n</code></pre> <pre><code>babylon apply --organization --var-file variables.yaml project/\n</code></pre> <pre><code>babylon apply --solution --var-file variables.yaml project/\n</code></pre> <pre><code>babylon apply --workspace --var-file variables.yaml project/\n</code></pre></p>"},{"location":"commands/babylon_commands/","title":"Babylon Commands","text":""},{"location":"commands/babylon_commands/#help-command","title":"Help Command","text":"<p>Help command</p> <pre><code>&gt; babylon --help\nUsage: babylon [OPTIONS] COMMAND [ARGS]...\n\n   ____              __                 ___  \n  /\\  _`\\           /\\ \\               /\\_ \\  \n  \\ \\ \\L\\ \\     __  \\ \\ \\____   __  __ \\//\\ \\      ___     ___  \n   \\ \\  _ &lt;'  /'__`\\ \\ \\ '__`\\ /\\ \\/\\ \\  \\ \\ \\    / __`\\ /' _ `\\  \n    \\ \\ \\L\\ \\/\\ \\L\\.\\_\\ \\ \\L\\ \\\\ \\ \\_\\ \\  \\_\\ \\_ /\\ \\L\\ \\/\\ \\/\\ \\  \n     \\ \\____/\\ \\__/.\\_\\\\ \\_,__/ \\/`____ \\ /\\____\\\\ \\____/\\ \\_\\ \\_\\  \n      \\/___/  \\/__/\\/_/ \\/___/   `/___/&gt; \\\\/____/ \\/___/  \\/_/\\/_/  \n                                    /\\___/  \n                                    \\/__/  \n                                                             v4.2.3\n\n  CLI used for cloud interactions between CosmoTech and multiple cloud\n\n    environment\n\n    The following environment variables are required:\n\n    - BABYLON_SERVICE: Vault Service URI\n    - BABYLON_TOKEN: Access Token Vault Service\n    - BABYLON_ORG_NAME: Organization Name\n\n\n    Options:\n    -v, --verbosity LVL     Either CRITICAL, ERROR, WARNING, INFO or DEBUG\n    --bare, --raw, --tests  Enable test mode, this mode changes output\n                            formatting.\n    -n, --dry-run           Will run commands in dry-run mode.\n    --version               Print version number and return.\n    --help                  Show this message and exit.\n\n    Commands:\n    abba       Cosmotech ABBA\n    api        Cosmotech API\n    apply      Macro Apply\n    azure      Group allowing communication with Microsoft Azure Cloud\n    destroy    Macro Destroy\n    github     Group allowing communication with Github REST API\n    hvac       Group handling Vault Hashicorp\n    namespace  Babylon namespace\n    powerbi    Group handling communication with PowerBI API\n    webapp     Group handling Cosmo Sample WebApp configuration\n</code></pre>"},{"location":"commands/babylon_commands/#namespace-use-command","title":"Namespace Use Command","text":"<p>Namespace Use</p> <pre><code> &gt; babylon namespace use -c test -t dev -s 25075b92\n   INFO     2025-08-11 18:01:45,484 | [namespace] switched to namespace test, dev successfully\n</code></pre>"},{"location":"commands/babylon_commands/#apply-macro-command","title":"Apply Macro Command","text":"<p>Macro Apply</p> <pre><code> &gt; babylon apply project/\n</code></pre>"},{"location":"commands/babylon_commands/#apply-single-command","title":"Apply Single Command","text":"<p>Apply Organization</p> <pre><code> &gt; babylon apply --organization --var-file variables.yaml project/\n</code></pre> <p>Apply Solution</p> <pre><code> &gt; babylon apply --solution --var-file variables.yaml project/\n</code></pre> <p>Apply Workspace</p> <pre><code> &gt; babylon apply --workspace --var-file variables.yaml project/\n</code></pre>"},{"location":"commands/babylon_commands/#destroy-macro-command","title":"Destroy Macro Command","text":"<p>Macro Destroy</p> <pre><code> &gt; babylon destroy --state-to-destro /path/to/&lt;state_id&gt;\n</code></pre>"},{"location":"guides/az_requirements/","title":"Az requirements","text":""},{"location":"guides/az_requirements/#azure-requirements","title":"Azure requirements","text":"<p>Requirements</p> <p>The following elements are required before you can use Babylon on an Azure subscription</p> <ul> <li> <p>Fully set up Cosmo Tech Platform installed on your Azure Tenant</p> </li> <li> <p>App registration for Babylon</p> </li> </ul> <p>Babylon uses a Service Principal to interact with the API and other resources. To do so, Babylon needs to be registered as an application in the Azure Active Directory.</p> <p>This App Registration will be used to authenticate and get the required tokens to connect to your Platform. Rights on the App Registration depends on the type of connection you want to make. </p> <p>We recommend defining this app registration as a mobile and desktop application in Azure configuration with redirection URL (mostly for authenticating against Azure services.</p> <p>See official documentation :</p> <pre><code>* https://learn.microsoft.com/en-us/entra/identity-platform/v2-oauth2-auth-code-flow\n* https://learn.microsoft.com/en-us/entra/identity-platform/msal-client-application-configuration\n* https://learn.microsoft.com/en-us/onedrive/developer/rest-api/getting-started/msa-oauth?view=odsp-graph-online\n</code></pre> <p>The App registration needs the following API permissions:</p> <p>API Permissions</p> <p>Microsoft Graph \ud83d\udd39 Application.ReadWrite.All (Application) \ud83d\udd39 Application.ReadWrite.OwnedBy (Application) \ud83d\udd39 Group.ReadWrite.All (Delegated) \ud83d\udd39 User.Read (Delegated) </p> <p>Platform API \ud83d\udd39 Platform.Admin (Application) </p> <p>For those concerned with specifics Azure policies, all Microsoft Graph's permissions can be deleted excepted User.Read (Delegated), but this implies that some operations would be handled manually. The platform API permission is mandatory.</p> <p>Important</p> <p>Babylon App registration needs at least Contributor role on Cosmo Tech Platform Resource Group.</p>"},{"location":"guides/resource_file/","title":"Resource file","text":"<p>If the state file does not exist, the first Babylon command you run will initialize a new state and persist it locally.</p> <p>Note</p> <ul> <li>To enable persistence in the cloud, you must set the parameter <code>remote: true</code>.   (This will be explained in detail in the Deploy Workspace tutorial, just keep it in mind for now.)</li> <li>The structure and content of the state may change in future releases as needed.</li> </ul>"},{"location":"guides/resource_file/#babylon-state-structure","title":"Babylon State Structure","text":"<p>The Babylon state is a structured YAML file composed of multiple sections. At a high level, you will find three main entries: <pre><code>context:\nfiles: []\nid: \ntenant:\n</code></pre> <pre><code>services:\n  api:\n    organization_id: \n    solution_id: \n    workspace_id: \n</code></pre></p>"},{"location":"guides/tfc_requirements/","title":"Terraform Cloud Requirements","text":"Requirements <p>The following elements are required before you can use Babylon on Terraform Cloud  - A Terraform Cloud organization token, for workspace creation or configuration  - A Terraform Cloud user token, for workspace configuration or execution</p>"},{"location":"guides/tfc_requirements/#allow-access-to-terraform-cloud","title":"Allow access to Terraform Cloud","text":"<p>Babylon uses the Terraform Cloud tokens to authenticate users and allow them to interact with the API. For operation on workspaces you will need to add a oauth token to terraform-cloud in the webapp. Once this oauth token you will add its id to your workspace configuration with babylon. - babylon terraform-cloud workspace create</p> <p>You can use the following commands to setup your token secrets in your <code>.secrets.yaml.encrypt</code> file for <code>Babylon</code> to use it directly !   - babylon terraform-cloud login   - babylon terraform-cloud logout </p>"},{"location":"guides/vault_requirements/","title":"Vault service","text":"<p>Requirements</p> <p>The following elements are required before you can use Babylon on an Azure subscription</p> Vault requirements"},{"location":"partials/installation/from_docker/","title":"From docker","text":""},{"location":"partials/installation/from_docker/#get-babylon-from-docker","title":"Get Babylon from docker","text":"Prerequisites Requirement Docker <p>Choosing the version of Babylon you want to use you can run the following command</p> Download docker image <pre><code>docker pull ghcr.io/cosmo-tech/babylon:latest\ndocker tag ghcr.io/cosmo-tech/babylon:latest babylon\n</code></pre> <p>It will download for you the required docker image, and rename it to <code>babylon</code></p> Start Babylon docker image <p>Using the following command you get in a working Babylon environment, allowing you to run any command you will like <pre><code>docker run -ti --rm babylon\n</code></pre></p> <p>Warning</p> <p>In this environment your changes to the files won't be persisted when you leave it. The following tips will help you set up persitance for your config, but will use knowledge of Babylon explained in future guides.</p> Persist configurations and use local content as a working dir Info <p>This tip concern some principle of Babylon explained is other guides, you can skip it for now if you want to understand those principles before running commands using them.</p> <p>To persist configuration we will use the <code>--mount</code> option of Docker to persist our data across runs</p> Persist configuration <pre><code>mkdir babylon_config\ndocker run -ti --rm --mount type=bind,source=\"$(pwd)\"/babylon_config,target=/opt/babylon babylon\n</code></pre> <p>This command will persist your Babylon configuration in a local <code>/babylon_config</code> folder allowing you to keep it across runs (in the same folder)</p> <p>Now if you want to use your local files as a working directory for your commands you can do the following</p> Use local folder as working dir <pre><code>docker run -ti --rm --mount type=bind,source=\"$(pwd)\",target=/etc/babylon/workingdir babylon\n</code></pre> <p>This command will use your current folder as a working directory for your babylon commands</p> <p>Combining both options allows for a persistent content and config across runs</p> Combine both for persitence <pre><code>docker run -ti --rm --mount type=bind,source=\"$(pwd)\"/babylon_config,target=/opt/babylon --mount type=bind,source=\"$(pwd)\",target=/etc/babylon/workingdir babylon\n</code></pre> Use aliases to make a babylon command using docker <p>Info</p> <ul> <li>Only work on system having the <code>alias</code> command</li> <li>Won't allow you to use auto-completion</li> </ul> <p>The following command will create a command <code>babylon</code> having the same use as the one you would get by installing the sources but by using docker.</p> <code>babylon</code> alias command <pre><code>alias babylon=\"docker run -ti --rm --mount type=bind,source=$(pwd)/babylon_config,target=/opt/babylon --mount type=bind,source=$(pwd),target=/etc/babylon/workingdir --entrypoint babylon babylon\"\n</code></pre>"},{"location":"partials/installation/from_git/","title":"From git","text":"<p>Get sources from git</p> <p>You can download the latest version of Babylon using git clone command</p> <p>Latest Version</p> <pre><code>git clone git@github.com:Cosmo-Tech/Babylon.git babylon\ncd babylon\n</code></pre> <p>Get the specific version from git</p> <p>If you want a specific version of Babylon (e.g. v5.0.0-beta.1)</p> <p>Specific Version</p> <pre><code>git clone -b v5.0.0-beta.1 git@github.com:Cosmo-Tech/Babylon.git babylon\ncd babylon\n</code></pre>"},{"location":"partials/installation/from_source/","title":"From source","text":""},{"location":"partials/installation/from_source/#get-babylon-from-source","title":"Get Babylon from source","text":"<p>Requirements</p> <ul> <li>\ud83d\udc0d Python 3.10+ </li> <li>\ud83d\udce6 Pip 22.2+ </li> <li>\ud83c\udf31 Git </li> <li>\ud83d\udce6 Uv 0.9.13+ </li> <li>\ud83d\udc0d Kubectl</li> </ul> <p>We will go through the process of getting a version of Babylon before the installation.</p> <p>Get sources from git</p> <p>You can download the latest version of Babylon using git clone command</p> <p>Latest Version</p> <pre><code>git clone git@github.com:Cosmo-Tech/Babylon.git babylon\ncd babylon\n</code></pre> <p>Get the specific version from git</p> <p>If you want a specific version of Babylon (e.g. v5.0.0-beta.1)</p> <p>Specific Version</p> <pre><code>git clone -b v5.0.0-beta.1 git@github.com:Cosmo-Tech/Babylon.git babylon\ncd babylon\n</code></pre>"},{"location":"partials/installation/from_source/#install-babylon","title":"Install Babylon","text":"<p>There are two ways to install Babylon: using uv or using venv. Currently, the recommended method is uv. You can follow the official instructions here: UV Installation Guide.</p> <p>You can install Babylon globally on your system:</p> <p>Uv</p> <pre><code>uv .venv\nsource .venv/bin/activate\nuv pip install .\n</code></pre> <p>Venv</p> <pre><code>python3 -m venv .venv\nsource .venv/bin/activate\npip install .\n</code></pre> <p>Alternatively, follow these steps if you want to install Babylon in development mode:</p> <p>Uv</p> <pre><code>uv pip install -e . --group dev\n</code></pre> <p>Venv</p> <pre><code>python3 -m venv .venv\nsource .venv/bin/activate\npip install -e .\n</code></pre>"},{"location":"partials/installation/prerequisites/","title":"Prerequisites","text":"<ul> <li>\ud83d\udc0d Python 3.10+ </li> <li>\ud83d\udce6 Pip 22.2+ </li> <li>\ud83c\udf31 Git </li> <li>\ud83d\udce6 Uv 0.9.13+ </li> <li>\ud83d\udc0d Kubectl</li> </ul>"},{"location":"tutorial/","title":"Tutorials","text":"<p>A list of tutorials to start using Babylon v5.</p> <p> Getting started with Babylon v5</p> <p>In this guide you'll learn how to install, run commands, and experiment with Babylon.</p> <p> Step 1</p> <p> Deploy a new Workspace</p> <p>This guide will help you deploy a new organization, solution, and workspace.</p> <p> Step 2</p> <p> Deploy a Workspace with an existing Organization and/or Solution</p> <p>This guide will help you deploy a workspace with existing organization and solution resources.</p> <p> Step 3</p> <p> Destroy a Workspace</p> <p>This guide will show you how to destroy a workspace.</p> <p> Destroy</p>"},{"location":"tutorial/Deploy_CosmoTech_workspace/","title":"Deploy Cosmo Tech workspace","text":"<p>Remember</p> <p>This guide focuses on explaining each object individually. A complete deployment workflow is provided in the Examples section, where all components are combined in a practical scenario !</p> <p>Before proceeding, ensure that you have selected the correct <code>tenant</code>.</p> <p>In this example, we will use the following identifiers:</p> <ul> <li><code>context_id</code>: <code>test</code> </li> <li><code>tenant_id</code>: <code>dev</code> </li> <li><code>state_id</code>: <code>8db6069e</code></li> </ul> <p>To deploy a complete Cosmo Tech workspace, you can declare its configuration in yaml files corresponding to specific deployment type. </p> <p>Each file contains general information about the deployment:</p> <p>Important</p> <p>In this tutorial each Cosmo Tech object, values defined directly within the corresponding YAML file. However, in the Examples section, you will see that we use a centralized <code>variables.yaml</code> file, which defines all required variables and is then referenced across the YAML configurations !</p>"},{"location":"tutorial/Deploy_CosmoTech_workspace/#api-organization","title":"API Organization","text":"<p><pre><code>kind: Organization\nnamespace:\n  remote: true   # false by default\n</code></pre> The deployment configuration must define the following keys:</p> <ul> <li> <p><code>kind</code>   Specifies the type of resource to deploy.   Accepted values: <code>Organization</code>, <code>Solution</code>, <code>Workspace</code>, <code>WebApp</code>.  </p> <p>\u26a0\ufe0f The resource type must always start with a capital letter.</p> </li> <li> <p><code>namespace</code>   Provides metadata that uniquely identifies the deployment, including for now just:  </p> <ul> <li><code>remote</code>   A boolean flag indicating whether the state should be stored locally only (<code>false</code>, default) or both locally and in the cloud (<code>true</code>)</li> </ul> </li> <li> <p><code>spec</code>   Defines the resource configuration. The details are specified under the <code>payload</code> section.</p> </li> </ul> <p>For example, in an Organization deployment file:</p> <p>Organization.yaml</p> <pre><code>kind: Organization\nnamespace:\n  remote: true   # false by default\nspec:\n  payload:\n    name: \"{{organization_name}}\"\n    security: {{security}}\n</code></pre> <p>All keys in this file can be templated with <code>{{}}</code> syntax for objects and <code>\"{{}}\"</code> for strings, as <code>security</code> section of this file. Corresponding values must be stored in <code>variables.yaml</code> file at the same level that your project See \ud83d\udc49 Examples:</p> <pre><code>security:\n  default: viewer\n  accessControlList:\n    - id: user1@email.com\n      role: admin\n    - id: user2@email.com\n      role: editor\n    - id: user3@email.com\n      role: viewer\n</code></pre>"},{"location":"tutorial/Deploy_CosmoTech_workspace/#api-solution","title":"API Solution","text":"<p>This is how the solution deployment file is structured</p> <p>Solution.yaml</p> <pre><code>kind: Solution\nnamespace:\n  remote: true   # false by default\nmetadata:\n  selector:\n    organization_id: \"{{services['api.organization_id']}}\"\nspec:\n  payload:\n    key: \"demosolution\"\n    name: \"My Solution Name\"\n    description: \"My solution description\"\n    repository: brewery_for_continuous\n    version: latest\n    sdkVersion: '10.4.0'\n    alwaysPull: true\n    url: 'https://webapp.com'\n    tags:\n      - brewery\n    runTemplates:\n      - id: \"run_id\"\n        name: \"Standard simulation\"\n        csmSimulation: AzureWebApp/AzureWebApp_Simulation\n        run: true\n        preRun: true\n    parameters:\n    parameterGroups:\n    security:\n      default: none\n      accessControlList:\n        - id: user1@email.com\n          role: admin\n        - id: user2@email.com\n          role: editor\n        - id: user3@email.com\n          role: viewer\n</code></pre> <p>The <code>metadata</code> section defines deployment specific attributes. It is required in the following resource files:  </p> <ul> <li><code>solution.yaml</code> </li> <li><code>workspace.yaml</code> </li> </ul> <p>The <code>selector</code> block is used to specify the target organization under which the resource will be deployed.  </p> <ul> <li> <p>Parameter: <code>organization_id</code> </p> <ul> <li>Purpose:   Defines the unique organization in which the solution (or other resource) will be created.  </li> </ul> </li> <li> <p>Behavior:  </p> <ul> <li>Babylon will associate the deployment (e.g., a solution, workspace) with the specified organization_id.  </li> <li>Typically, this value is injected dynamically from the Babylon state (<code>services['api.organization_id']</code>).  </li> </ul> </li> </ul>"},{"location":"tutorial/Deploy_CosmoTech_workspace/#api-workspace","title":"API Workspace","text":"<p>The Workspace configuration may include additional parameters required to provision external services such as:</p> <ul> <li>Power BI workspaces</li> <li>Azure Event Hubs</li> <li>Azure Data Explorer (ADX) databases</li> </ul> <p>These parameters are normally defined under the <code>sidecars</code> section, specifically within the <code>cloud</code> key.</p> <p>However, this is not the case in the current release, because Cosmotech API v5 does not depend on any external cloud resources for the moment.</p> <p>Workspace.yaml</p> <pre><code>kind: Workspace\nnamespace:\n  remote: true   # false by default\nmetadata:\n  selector:\n    organization_id: \"{{services['api.organization_id']}}\"\n    solution_id: \"{{services['api.solution_id']}}\"\nspec:\n  sidecars:\n    cloud:\n  payload:\n    key: \"Project1\"\n    name: \"My Workspace Name\"\n    description: \"Workspace for solution\"\n    solution:\n      solutionId: \"{{services['api.solution_id']}}\"\n    useDedicatedEventHubNamespace: true\n    sendScenarioMetadataToEventHub: true\n    sendInputToDataWarehouse: true\n    sendScenarioRunToEventHub: true\n    additionalData:\n      webApp:\n        solution:\n          runTemplateFilter:\n          defaultRunTemplateDataset: null\n        charts:\n          workspaceId:\n          logInWithUserCredentials: false\n          scenarioViewIframeDisplayRatio: 4.514285714\n          dashboardsViewIframeDisplayRatio: 1.610062893\n          useWebappTheme: true\n          dashboardsView:\n          scenarioView:\n        menu:\n          supportUrl: 'https://support.cosmotech.com'\n          organizationUrl: 'https://cosmotech.com'\n          documentationUrl: 'https://portal.cosmotech.com/resources/platform-resources/web-app-user-guide'\n        datasetManager:\n    security:\n      default: none\n      accessControlList:\n        - id: user1@email.com\n          role: admin\n        - id: user2@email.com\n          role: editor\n        - id: user3@email.com\n          role: viewer\n</code></pre>"},{"location":"tutorial/Deploy_CosmoTech_workspace/#api-dataset","title":"API Dataset","text":"<p>You can include any parts you need from your CSV files, but make sure all CSV files are located in the root of the deployment directory.</p> <p>Dataset.yaml</p> <pre><code>kind: Dataset\nnamespace:\n  remote: true   # false by default\nspec:\n  sidecars:\n  payload:\n    id: # mandatory if you want to launch an update, without id a new dataset will be created ; if you want a new dataset, leave this field empty\n    name: Apply dataset\n    description: Creating dataset with nothing but update\n    tags:\n      - brewery\n    parts:\n      - name: part1\n        sourceName: customers.csv\n    security:\n      default: viewer\n      accessControlList:\n        - id: user1@email.com\n          role: admin\n        - id: user2@email.com\n          role: editor\n        - id: user3@email.com\n          role: viewer\n</code></pre>"},{"location":"tutorial/Deploy_CosmoTech_workspace/#api-runner","title":"API Runner","text":"<p>This is how the runner deployment file is structured</p> <p>Runner.yaml</p> <pre><code>kind: Runner\nnamespace:\n  remote: true   # false by default\nspec:\n  sidecars:\n  payload:\n    id: # mandatory if you want to launch an update, without id a new dataset will be created ; if you want a new dataset, leave this field empty\n    name: \"{{runner_name}}\"\n    runTemplateId: \"{{run_template_id}}\"\n    solutionId: \"{{services['api.solution_id']}}\"\n    solutionName: \"{{solution_name}}\"\n    runTemplateName: \"{{runTemplate_name}}\"\n    ownerName: \"{{owner_name}}\"\n    security:\n      default: viewer\n      accessControlList:\n        - id: user1@email.com\n          role: admin\n        - id: user2@email.com\n          role: editor\n        - id: user3@email.com\n          role: viewer\n</code></pre>"},{"location":"tutorial/Deploy_CosmoTech_workspace/#cosmo-tech-web-app","title":"Cosmo Tech Web App","text":"<p>To deploy a Cosmo Tech Web App, you can:</p> <ol> <li>Using the Terraform module    For the moment, the web app is not managed by Babylon. It is deployed using a Terraform module, but this will be supported in a future release.</li> </ol> <p>If you need to deploy the web app, refer to the README file in the Terraform web app module see \ud83d\udc49 Terraform.</p>"},{"location":"tutorial/Deploy_CosmoTech_workspace/#babylon-project-structure","title":"Babylon project structure","text":"<p>Project folder must have the following structure:</p> <p>Tree</p> <pre><code>\u251c\u2500\u2500 variables.yaml\n\u251c\u2500\u2500 project\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Organization.yaml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Solution.yaml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Workspace.yaml   \n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Runner.yaml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Dataset.yaml\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Workspace.yaml\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"tutorial/Deploy_CosmoTech_workspace/#launching-the-deployment-macro-command","title":"Launching the deployment Macro command","text":"<p>After filling all deployment files, you can launch the following command:</p> <p>Babylon Macro apply</p> <pre><code>babylon apply project/\n</code></pre> <p>Babylon will create and deploy all resources and save it in the state except for datasets and runner.  Keeping this information in the state simplifies modification of the resources as you can edit one of the project deployment files and relaunch <code>babylon apply</code> command. It will update existing resources or create missing ones, for example, in case when Babylon was granted more rights between two <code>apply</code> commands.</p> <p>You can also specify different variable files when launching the <code>babylon apply</code> command. </p> <p>To do this, use the <code>--var-file</code> option.</p> <p>Example</p> <pre><code>babylon apply project/ --var-file variable_file_1.yaml --var-file variable_file_2.yaml\n</code></pre> <p>Remember</p> <p>If you don't specify a variable file, Babylon will use the default variable file <code>variables.yaml</code></p>"},{"location":"tutorial/Deploy_CosmoTech_workspace/#executing-babylon-apply-on-a-single-object-api","title":"Executing babylon apply on a Single Object API","text":"<p>Babylon now supports deploying or updating a single object API using the <code>apply</code> macro command. This enhancement makes it easier to maintain and update only the specific object that has changed, instead of running the macro for all objects following best practices for efficient deployments.</p> <p>Command syntax</p> <p><pre><code>&gt; babylon apply --OBJECT --var-file variable_file_1.yaml project/\n</code></pre> As objects, Babylon accepts the following:</p> <pre><code>--organization       Deploy or update an organization.\n--solution           Deploy or update a solution.\n--workspace          Deploy or update a workspace.\n--dataset            Deploy or update a dataset.\n--runner             Deploy or update a runner.\n</code></pre>"},{"location":"tutorial/Deploy_CosmoTech_workspace/#executing-babylon-with-payload-only-option","title":"Executing babylon with <code>--payload-only</code> option","text":"<p>The <code>--payload-only</code> option allows Babylon to deploy or update an object API without triggering the deployment of associated Azure services defined in the deployment file. This is particularly useful for incremental updates where you only need to modify lightweight parts, such as adding permissions in the Object ACL or updating the payload. Fully redeploying these parts can be time consuming.</p> <p>However, this option should not be used when there are new Power BI reports, ADX database permissions, or other changes related to azure section, as those require a full deployment.</p> <p>\ud83d\udca1 Best practice for using <code>--payload-only</code> </p> <p>Use this option only when you have changes limited to the payload itself, avoiding unnecessary redeployment of Azure section.</p> <p><pre><code>&gt; babylon apply --OBJECT --payload-only --var-file variable_file_1.yaml project/\n</code></pre> As objects now, Babylon accepts the following:</p> <pre><code>--workspace          Deploy or update a workspace pyload only.\n</code></pre>"},{"location":"tutorial/Deploy_workspace_with_existing_org_sol/","title":"Deploy Cosmo Tech workspace with an existing organization and solution","text":"<p>Remember</p> <p>This guide focuses on explaining who we can deploy a wokspace with an existing organization and solution. A complete deployment workflow is provided in the Examples section, where all components are combined in a practical scenario !</p> <p>Before proceeding, ensure that you have selected the correct <code>platform</code> and <code>project</code>. If unsure, contact your <code>Babylon administrator</code> for the available options. In this example, we will use</p> <ul> <li>context_id: <code>test</code></li> <li>tenant_id: <code>dev</code></li> <li>state_id: <code>8db6069e</code></li> </ul> <p>Before going further, you should know that we have two concepts: deploying a solution object within an existing organization, and deploying a workspace object within an existing organization and solution. This is just to give you some quick context for the tutorial.</p>"},{"location":"tutorial/Deploy_workspace_with_existing_org_sol/#deploy-a-new-solution-within-an-existing-organization","title":"Deploy a new solution Within an existing organization","text":"<p>In this section, we will walk through deploying a Solution within an existing Organization. This setup assumes that:</p> <ul> <li>You already have at least one Organization deployed.</li> <li>A Solution can be deployed and linked to this existing organization.</li> </ul> <p>To deploy a new Solution within an existing Organization, you must declare its configuration in the YAML file. The main changes occur in the <code>solution.yaml</code> file, where you add the <code>metadata</code> section.</p>"},{"location":"tutorial/Deploy_workspace_with_existing_org_sol/#metadata-overview","title":"Metadata Overview","text":"<p>The <code>metadata</code> section contains deployment specific data and can appear in:</p> <ul> <li><code>solution.yaml</code></li> <li><code>workspace.yaml</code></li> </ul>"},{"location":"tutorial/Deploy_workspace_with_existing_org_sol/#selector-overview","title":"Selector Overview","text":"<p>Within <code>metadata</code>, there is a nested section called <code>selector</code> where you can set the <code>organization_id</code> field. This allows deployment of a solution within an existing organization.</p> <p>Important</p> <p>Add <code>organization_id</code> to the <code>variables.yaml</code> file.</p> <p>variables.yaml</p> <pre><code># API \norganization_id: o-rv0x8vd464kl\n</code></pre> <p>Below is an example of the solution manifest structure.</p> <p>solution.yaml</p> <pre><code>kind: Solution\nnamespace:\n  remote: true   # false by default\nmetadata:\n  selector:\n    organization_id: \"{{organization_id}}\" # &lt;---\nspec:\n  payload:\n    key: \"demosolution\"\n    name: \"My Solution Name\"\n    description: \"My solution description\"\n    repository: brewery_for_continuous\n    version: latest\n    sdkVersion: '10.4.0'\n    alwaysPull: true\n    url: 'https://webapp.com'\n    tags:\n      - brewery\n    runTemplates:\n      - id: \"run_id\"\n        name: \"Standard simulation\"\n        csmSimulation: AzureWebApp/AzureWebApp_Simulation\n        run: true\n        preRun: true\n    parameters:\n    parameterGroups:\n    security:\n      default: none\n      accessControlList:\n        - id: user1@email.com\n          role: admin\n        - id: user2@email.com\n          role: editor\n        - id: user3@email.com\n          role: viewer\n</code></pre>"},{"location":"tutorial/Deploy_workspace_with_existing_org_sol/#deploy-a-new-workspace-withing-an-existing-solution-and-organization","title":"Deploy a new workspace withing an existing solution and organization","text":"<p>Similarly, you can deploy a new Workspace within an existing Organization and Solution.  </p> <p>To do this, add both <code>organization_id</code> and <code>solution_id</code> under <code>metadata.selector</code> in the workspace configuration file.</p> <p>Workspace.yaml</p> <pre><code>kind: Workspace\nnamespace:\n  remote: true   # false by default\nmetadata:\n  selector:\n    organization_id: \"{{organization_id}}\" # &lt;--- \n    solution_id: \"{{solution_id}}\"         # &lt;---\nspec:\n  sidecars:\n    cloud:\n  payload:\n    key: \"Project1\"\n    name: \"My Workspace Name\"\n    description: \"Workspace for solution\"\n    solution:\n      solutionId: \"{{services['api.solution_id']}}\"\n    useDedicatedEventHubNamespace: true\n    sendScenarioMetadataToEventHub: true\n    sendInputToDataWarehouse: true\n    sendScenarioRunToEventHub: true\n    additionalData:\n      webApp:\n        solution:\n          runTemplateFilter:\n          defaultRunTemplateDataset: null\n        charts:\n          workspaceId:\n          logInWithUserCredentials: false\n          scenarioViewIframeDisplayRatio: 4.514285714\n          dashboardsViewIframeDisplayRatio: 1.610062893\n          useWebappTheme: true\n          dashboardsView:\n          scenarioView:\n        menu:\n          supportUrl: 'https://support.cosmotech.com'\n          organizationUrl: 'https://cosmotech.com'\n          documentationUrl: 'https://portal.cosmotech.com/resources/platform-resources/web-app-user-guide'\n        datasetManager:\n    security:\n      default: none\n      accessControlList:\n        - id: user1@email.com\n          role: admin\n        - id: user2@email.com\n          role: editor\n        - id: user3@email.com\n          role: viewer\n</code></pre> <p>Make sure to reference the corresponding <code>organization_id</code> and <code>solution_id</code> values declared in your <code>variables.yaml</code> file.</p> <p>variables.yaml</p> <pre><code># API \norganization_id: o-rv0x8vd464kl\nsolution_id: sol-wryolow98dsg\n</code></pre> <p>Now, with this Babylon feature, you can deploy multiple Workspaces that:</p> <ol> <li>Share the same Organization and Solution.</li> <li>Share the same Organization but use different Solutions.</li> </ol> <p>Important</p> <p>For each workspace deployment, you need a specific state file.</p> <p>e.g :  <code>state.&lt;context_id&gt;.&lt;tenant_id&gt;.&lt;state_id&gt;.yaml</code></p>"},{"location":"tutorial/Destroy_workspace/","title":"Destroy a Cosmo Tech Workspace","text":"<p>Remember</p> <p>The <code>destroy</code> command is not yet implemented.</p>"},{"location":"tutorial/Getting_started/","title":"Getting started with Babylon","text":"<p>This is a guide to getting started with Babylon v5. You'll learn how to install, run, and experiment with Babylon.</p>"},{"location":"tutorial/Getting_started/#get-babylon-from-source","title":"Get Babylon from source","text":"<p>Requirements</p> <ul> <li>\ud83d\udc0d Python 3.10+ </li> <li>\ud83d\udce6 Pip 22.2+ </li> <li>\ud83c\udf31 Git </li> <li>\ud83d\udce6 Uv 0.9.13+ </li> <li>\ud83d\udc0d Kubectl</li> </ul> <p>We will go through the process of getting a version of Babylon before the installation.</p> <p>Get sources from git</p> <p>You can download the latest version of Babylon using git clone command</p> <p>Latest Version</p> <pre><code>git clone git@github.com:Cosmo-Tech/Babylon.git babylon\ncd babylon\n</code></pre> <p>Get the specific version from git</p> <p>If you want a specific version of Babylon (e.g. v5.0.0-beta.1)</p> <p>Specific Version</p> <pre><code>git clone -b v5.0.0-beta.1 git@github.com:Cosmo-Tech/Babylon.git babylon\ncd babylon\n</code></pre>"},{"location":"tutorial/Getting_started/#install-babylon","title":"Install Babylon","text":"<p>There are two ways to install Babylon: using uv or using venv. Currently, the recommended method is uv. You can follow the official instructions here: UV Installation Guide.</p> <p>You can install Babylon globally on your system:</p> <p>Uv</p> <pre><code>uv .venv\nsource .venv/bin/activate\nuv pip install .\n</code></pre> <p>Venv</p> <pre><code>python3 -m venv .venv\nsource .venv/bin/activate\npip install .\n</code></pre> <p>Alternatively, follow these steps if you want to install Babylon in development mode:</p> <p>Uv</p> <pre><code>uv pip install -e . --group dev\n</code></pre> <p>Venv</p> <pre><code>python3 -m venv .venv\nsource .venv/bin/activate\npip install -e .\n</code></pre> <p>Now that you have a fully functional installation of Babylon, you can check the next steps to learn how to start running commands.</p>"},{"location":"tutorial/Getting_started/#setup-babylon","title":"Setup Babylon","text":"<p>\u26a0\ufe0f Vault is replaced with Kubernetes secrets</p> <p>Babylon now uses Kubernetes secrets as the source of configuration required for it to operate</p> <p>The first thing to do to verify that Babylon is working properly run:</p> <pre><code>babylon --help\n</code></pre>"},{"location":"tutorial/Getting_started/#set-kubernetes-context","title":"Set Kubernetes Context","text":"<p>Some configuration variables must be set before interacting with the Babylon CLI.</p> <p>Currently, there are two options: 1. Babylon can load configuration directly from a Kubernetes secret. 2. You can manually export the required values as environment variables.</p> <p>Error example</p> <pre><code>&gt; babylon api about \nINFO     2025-12-09 10:54:04,281:INFO:Babylon.utils.environment:Loading configuration from Kubernetes secret\nERROR    2025-12-09 10:54:04,565:ERROR:Babylon.utils.environment:\n        Failed to read Kubernetes secret 'keycloak-babylon' in namespace 'dev'\n        Please ensure your kubeconfig is valid and your context is correctly set\n        You can switch context using: 'kubectl config use-context &lt;context-name&gt;'\n</code></pre> <p>To fix this, check your current Kubernetes context and switch to the correct one:</p> <p>Example</p> <pre><code>&gt; kubectl config current-context\ndev-aks\n\n&gt; kubectl config use-context prod-aks\nSwitched to context \"prod-aks\"\n\n&gt; kubectl config current-context\nprod-aks\n</code></pre> <p>Now you can run the command again, and it should work:</p> <p>Example</p> <pre><code>&gt; babylon api about\nINFO     2025-12-09 11:03:29,426:INFO:Babylon.utils.environment:Loading configuration from Kubernetes secret\n\nGet the version of the API service\n\nINFO     2025-12-09 11:03:30,115:INFO:Babylon.commands.api.meta.about:API version:{'full': '5.0.0-1639f21d', 'release': '5.0.0', 'major': 5, 'minor': 0, 'patch': 0, 'label': 'rc2', 'build': '1639f21d'}\n</code></pre> <p>Alternatively, if you need CI/CD workflows or want to run quick local tests without loading the Kubernetes secret, you can export the required variables directly in your terminal.</p> <p>Example</p> <pre><code>API_URL=https://dev.api.cosmotech.com/dev/v5   \nCLIENT_ID=cosmotech-babylon-client  \nCLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxx \nTOKEN_URL=https://dev.api.cosmotech.com/keycloak/realms/dev/protocol/openid-connect/token \n</code></pre> <p>You can retrieve these values using <code>kubectl</code>, or you can contact your Babylon administrator to obtain them.</p> <p>Important</p> <p>For configuration, you can retrieve the values from the cluster using one of the following methods:</p> \ud83d\udda5\ufe0f Using k9s\ud83e\udde9 Using kubectl <p>Open <code>k9s</code>, navigate to the relevant namespace, and retrieve the secret named <code>keycloak-babylon</code> which contains the configuration.</p> <pre><code># List all secrets in the target namespace\nkubectl -n dev get secrets\n\n# Look for the 'keycloak-babylon' secret and view its YAML content\nkubectl -n dev get secret keycloak-babylon -o json | jq -r '.data | to_entries[] | \"\\(.key)=\\(.value | @base64d)\"'\n</code></pre>"},{"location":"tutorial/Getting_started/#configuration","title":"Configuration","text":"<p>At this point, you need three variables to perform Babylon commands.</p> Variable Description Example <code>context_id</code> Project name (string of your choice, no special characters) <code>project1</code> <code>tenant_id</code> Tenant ID (e.g., dev, staging, prod) <code>dev</code> <code>state_id</code> State name (string of your choice, no special characters) <code>state1</code> <p>\u26a0\ufe0f Variable Constraints</p> <ul> <li><code>context_id</code> and <code>state_id</code> can be any string of your choice, but they must not contain special characters.  </li> <li>For state_id, you can generate a new UUID with <code>uuidgen</code>:  </li> </ul> Linux <pre><code>sudo apt update\nsudo apt install uuid-runtime -y\n# Generate a UUID\nuuidgen | cut -c1-8\n# Example output:\n0475231d\n</code></pre> Windows <pre><code># Open PowerShell and run:\n[guid]::NewGuid().ToString().Substring(0,8)\n# Example output:\n0475231d\n</code></pre> <ul> <li><code>tenant_id</code> represents the namespace kubernetes (e.g., <code>dev</code>, <code>staging</code>, ...).  </li> </ul> <p>To initialize Babylon namespace with these values, run:</p> <pre><code>babylon namespace use -c &lt;context_id&gt; -t &lt;tenant_id&gt; -s &lt;state_id&gt;\n</code></pre> <p>Generated Configuration</p> <ul> <li>This command creates a file called namespace.yaml</li> <li>Location: ~/.config/cosmotech/babylon/namespace.yaml</li> <li>It contains the current context for your deployment</li> </ul> <p>You can now test Babylon by running a simple command:   <pre><code>babylon api organizations get-all\n</code></pre> If you have already created an organization, you should see its details in the output.</p> <p>Example List Organizations</p> <p><pre><code>&gt; babylon api organizations get-all\n</code></pre> <pre><code>[\n  {\n    \"id\": \"o-55dsz6e51n8y8j\",\n    \"name\": \"Organization name\",\n    \"ownerId\": \"e0035649-0f12-4221-9631-3519704816c1\",\n    \"services\": null,\n    \"security\": {\n      \"default\": \"none\",\n      \"accessControlList\": [\n        {\n          \"id\": \"example.test@cosmotech.com\",\n          \"role\": \"admin\"\n        }\n      ]\n    }\n  }\n]\n</code></pre></p> <p>In Babylon v5, the state is now independent of the configuration. The initial configuration is fetched from Kubernetes secrets, and the state is generated during deployment. It is then persisted in two different backends to ensure consistency and recovery.  </p> <p>This persisted state is referred to as the Babylon state.</p> <p>Where the Babylon state is stored</p> <p>The state is saved in two locations:</p> <ol> <li>Remote backend (cloud) \u2192 <code>babylon-states</code>  (\u2757not available in this release, will be implemented in a future release)</li> <li>Local backend (YAML file) \u2192 <code>~/.config/babylon/state.&lt;context_id&gt;.&lt;tenant_id&gt;.&lt;state_id&gt;.yaml</code></li> </ol> <p>Note</p> <p>In this release, the state is stored only locally. Remote state persistence will be implemented in a future release.</p>"},{"location":"tutorial/Getting_started/#state-file-specification","title":"State file specification","text":"<p>If the state file does not exist, the first Babylon command you run will initialize a new state and persist it locally.</p> <p>Note</p> <ul> <li>To enable persistence in the cloud, you must set the parameter <code>remote: true</code>.   (This will be explained in detail in the Deploy Workspace tutorial, just keep it in mind for now.)</li> <li>The structure and content of the state may change in future releases as needed.</li> </ul>"},{"location":"tutorial/Getting_started/#babylon-state-structure","title":"Babylon State Structure","text":"<p>The Babylon state is a structured YAML file composed of multiple sections. At a high level, you will find three main entries: <pre><code>context:\nfiles: []\nid: \ntenant:\n</code></pre> <pre><code>services:\n  api:\n    organization_id: \n    solution_id: \n    workspace_id: \n</code></pre></p>"},{"location":"tutorial/Getting_started/#whats-new-in-babylon-v5","title":"What\u2019s New in Babylon v5","text":""},{"location":"tutorial/Getting_started/#new-namespace-commands","title":"New namespace commands","text":"<p>Running the following command displays the updated namespace commands:</p> <p>Example</p> <pre><code>&gt; babylon namespace --help\nUsage: babylon namespace [OPTIONS] COMMAND [ARGS]...\n\n  Babylon namespace\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  get-contexts  Display the currently active namespace\n  get-states    Display all states in your local machine\n  use           Switch to a specific namespace or create a new one\n</code></pre> <p>Using these commands, you can check the currently active namespace.  Additionally, with <code>get-states</code>, you can list all states available on our local machine. Here are some examples:</p> <p>Example</p> <pre><code>&gt; babylon namespace get-contexts  \nCURRENT  CONTEXT                            TENANT        STATE ID                              \n*        project1                           dev           1184d4e3 \n\n# or use get-states\n\n&gt; babylon namespace get-states \nINFO   2025-10-23 22:27:31,230 |  state.project1.dev.c9b011db.yaml\nINFO   2025-10-23 22:27:31,232 |  state.project2.prod.d4ab0004.yaml\nINFO   2025-10-23 22:27:31,233 |  state.project3.staging.9646a17d.yaml\n</code></pre>"},{"location":"tutorial/Getting_started/#keycloak-authentication","title":"Keycloak Authentication","text":"<p>Keycloak Auth</p> <ul> <li>Starting with vesion 5, Babylon uses Keycloak as the authentication system to authenticate with the Cosmotech API and execute commands to create objects.</li> <li>A new client, <code>cosmotech-babylon-client</code>, is created in Keycloak for this purpose.</li> </ul>"},{"location":"tutorial/Getting_started/#new-babylon-init-commnad","title":"New babylon init commnad","text":"<p>After setting the context with the <code>namespace use</code> command you can now easily initialize your project with a basic structure using the <code>babylon init</code> command. Here\u2019s an example:</p> <p>Examples</p> <p><pre><code>&gt; babylon init --help\nUsage: babylon init [OPTIONS]\n\nCreate a Babylon project structure using YAML templates.\n\nOptions:\n--project-folder TEXT  Name of the project folder to create (default:'project').\n--variables-file TEXT  Name of the variables file (default:'variables.yaml').\n--help  Show this message and exit.\n</code></pre> <pre><code> &gt; babylon init\n INFO     2025-10-24 09:54:53,853 | \n      [babylon] Project successfully initialized at: ~/CosmoTech/DevOps/babylon_v5_dir/test-babylon/project\n</code></pre> <pre><code>  .\n  \u251c\u2500\u2500 babylon.error\n  \u251c\u2500\u2500 babylon.log\n  \u251c\u2500\u2500 project\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 Dataset.yaml\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 Organization.yaml\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 Runner.yaml\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 Solution.yaml\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 Workspace.yaml\n  \u251c\u2500\u2500 customers.csv\n  \u2514\u2500\u2500 variables.yaml\n</code></pre></p> <p>Now, you can get started with running Babylon commands. All the required YAML files for the resources you need to deploy in v5 are provided as templates. You can customize and modify them based on your specific needs.</p>"},{"location":"tutorial/Getting_started/#new-group-for-handling-runner-and-run-objects","title":"New group for handling runner and run objects","text":"<p>Important</p> <p>In v5, there is no longer a Connector object, and Scenario / ScenarioRun have been replaced by Runner and Run. For more information refer to the Cosmo Tech platform release notes.</p>"},{"location":"tutorial/Getting_started/#meta-about-endpoint","title":"Meta About Endpoint","text":"<p>You can now see which API version you are using with the following command:</p> <p>about</p> <p><pre><code>babylon api about\n</code></pre> <pre><code>{\n  \"version\": {\n    \"full\": \"5.0.0-beta5-7ebc87cb\",\n    \"release\": \"5.0.0-beta5\",\n    \"major\": 5,\n    \"minor\": 0,\n    \"patch\": 0,\n    \"label\": \"beta5\",\n    \"build\": \"7ebc87cb\"\n  }\n}\n</code></pre></p>"},{"location":"tutorial/Getting_started/#commands-for-testing","title":"Commands for Testing","text":"<p>For more details on how to test, see \ud83d\udc49 Examples.</p> <p>Commands</p> <p><pre><code>babylon apply --organization project/  \n</code></pre> <pre><code>babylon apply --solution project/\n</code></pre> <pre><code>babylon apply --workspace project/ \n</code></pre> <pre><code>babylon apply --dataset project/\n</code></pre> <pre><code>babylon apply --runner project/\n</code></pre></p> <p>Note</p> <p>You can use the <code>--var-file</code> option to specify a particular <code>variables.yaml</code> file.</p> <p>The <code>babylon apply --dataset/runner</code> command is a shortcut that performs the same action as a single <code>babylon api datasets/runner create</code> command. If you want to perform more actions, such as updating or listing resources, you need to use the single commands directly.</p> <p>Commands</p> <p><pre><code>babylon api datasets create o-xxxxxxxxxx w-xxxxxxxxxxx d-xxxxxxxxx project/Dataset.yaml \n</code></pre> <pre><code>babylon api datasets get o-xxxxxxxxxx w-xxxxxxxxxxx project/Dataset.yaml \n</code></pre> <pre><code>babylon api runners create o-xxxxxxxxxx w-xxxxxxxxxxx project/Runner.yaml \n</code></pre> <pre><code>babylon api runners update o-xxxxxxxxxx w-xxxxxxxxxxx r-xxxxxxxxxx project/Runner.yaml \n</code></pre></p>"},{"location":"tutorial/API/Dataset/","title":"Dataset","text":"<p>You can include any parts you need from your CSV files, but make sure all CSV files are located in the root of the deployment directory.</p> <p>Dataset.yaml</p> <pre><code>kind: Dataset\nnamespace:\n  remote: true   # false by default\nspec:\n  sidecars:\n  payload:\n    id: # mandatory if you want to launch an update, without id a new dataset will be created ; if you want a new dataset, leave this field empty\n    name: Apply dataset\n    description: Creating dataset with nothing but update\n    tags:\n      - brewery\n    parts:\n      - name: part1\n        sourceName: customers.csv\n    security:\n      default: viewer\n      accessControlList:\n        - id: user1@email.com\n          role: admin\n        - id: user2@email.com\n          role: editor\n        - id: user3@email.com\n          role: viewer\n</code></pre>"},{"location":"tutorial/API/Organization/","title":"Organization","text":"<p><pre><code>kind: Organization\nnamespace:\n  remote: true   # false by default\n</code></pre> The deployment configuration must define the following keys:</p> <ul> <li> <p><code>kind</code>   Specifies the type of resource to deploy.   Accepted values: <code>Organization</code>, <code>Solution</code>, <code>Workspace</code>, <code>WebApp</code>.  </p> <p>\u26a0\ufe0f The resource type must always start with a capital letter.</p> </li> <li> <p><code>namespace</code>   Provides metadata that uniquely identifies the deployment, including for now just:  </p> <ul> <li><code>remote</code>   A boolean flag indicating whether the state should be stored locally only (<code>false</code>, default) or both locally and in the cloud (<code>true</code>)</li> </ul> </li> <li> <p><code>spec</code>   Defines the resource configuration. The details are specified under the <code>payload</code> section.</p> </li> </ul> <p>For example, in an Organization deployment file:</p> <p>Organization.yaml</p> <pre><code>kind: Organization\nnamespace:\n  remote: true   # false by default\nspec:\n  payload:\n    name: \"{{organization_name}}\"\n    security: {{security}}\n</code></pre> <p>All keys in this file can be templated with <code>{{}}</code> syntax for objects and <code>\"{{}}\"</code> for strings, as <code>security</code> section of this file. Corresponding values must be stored in <code>variables.yaml</code> file at the same level that your project See \ud83d\udc49 Examples:</p> <pre><code>security:\n  default: viewer\n  accessControlList:\n    - id: user1@email.com\n      role: admin\n    - id: user2@email.com\n      role: editor\n    - id: user3@email.com\n      role: viewer\n</code></pre>"},{"location":"tutorial/API/Runner/","title":"Runner","text":"<p>This is how the runner deployment file is structured</p> <p>Runner.yaml</p> <pre><code>kind: Runner\nnamespace:\n  remote: true   # false by default\nspec:\n  sidecars:\n  payload:\n    id: # mandatory if you want to launch an update, without id a new dataset will be created ; if you want a new dataset, leave this field empty\n    name: \"{{runner_name}}\"\n    runTemplateId: \"{{run_template_id}}\"\n    solutionId: \"{{services['api.solution_id']}}\"\n    solutionName: \"{{solution_name}}\"\n    runTemplateName: \"{{runTemplate_name}}\"\n    ownerName: \"{{owner_name}}\"\n    security:\n      default: viewer\n      accessControlList:\n        - id: user1@email.com\n          role: admin\n        - id: user2@email.com\n          role: editor\n        - id: user3@email.com\n          role: viewer\n</code></pre>"},{"location":"tutorial/API/Solution/","title":"Solution","text":"<p>This is how the solution deployment file is structured</p> <p>Solution.yaml</p> <pre><code>kind: Solution\nnamespace:\n  remote: true   # false by default\nmetadata:\n  selector:\n    organization_id: \"{{services['api.organization_id']}}\"\nspec:\n  payload:\n    key: \"demosolution\"\n    name: \"My Solution Name\"\n    description: \"My solution description\"\n    repository: brewery_for_continuous\n    version: latest\n    sdkVersion: '10.4.0'\n    alwaysPull: true\n    url: 'https://webapp.com'\n    tags:\n      - brewery\n    runTemplates:\n      - id: \"run_id\"\n        name: \"Standard simulation\"\n        csmSimulation: AzureWebApp/AzureWebApp_Simulation\n        run: true\n        preRun: true\n    parameters:\n    parameterGroups:\n    security:\n      default: none\n      accessControlList:\n        - id: user1@email.com\n          role: admin\n        - id: user2@email.com\n          role: editor\n        - id: user3@email.com\n          role: viewer\n</code></pre> <p>The <code>metadata</code> section defines deployment specific attributes. It is required in the following resource files:  </p> <ul> <li><code>solution.yaml</code> </li> <li><code>workspace.yaml</code> </li> </ul> <p>The <code>selector</code> block is used to specify the target organization under which the resource will be deployed.  </p> <ul> <li> <p>Parameter: <code>organization_id</code> </p> <ul> <li>Purpose:   Defines the unique organization in which the solution (or other resource) will be created.  </li> </ul> </li> <li> <p>Behavior:  </p> <ul> <li>Babylon will associate the deployment (e.g., a solution, workspace) with the specified organization_id.  </li> <li>Typically, this value is injected dynamically from the Babylon state (<code>services['api.organization_id']</code>).  </li> </ul> </li> </ul>"},{"location":"tutorial/API/Webapp/","title":"Webapp","text":"<p>To deploy a Cosmo Tech Web App, you can:</p> <ol> <li>Using the Terraform module    For the moment, the web app is not managed by Babylon. It is deployed using a Terraform module, but this will be supported in a future release.</li> </ol> <p>If you need to deploy the web app, refer to the README file in the Terraform web app module see \ud83d\udc49 Terraform.</p>"},{"location":"tutorial/API/Workspace/","title":"Workspace","text":"<p>The Workspace configuration may include additional parameters required to provision external services such as:</p> <ul> <li>Power BI workspaces</li> <li>Azure Event Hubs</li> <li>Azure Data Explorer (ADX) databases</li> </ul> <p>These parameters are normally defined under the <code>sidecars</code> section, specifically within the <code>cloud</code> key.</p> <p>However, this is not the case in the current release, because Cosmotech API v5 does not depend on any external cloud resources for the moment.</p> <p>Workspace.yaml</p> <pre><code>kind: Workspace\nnamespace:\n  remote: true   # false by default\nmetadata:\n  selector:\n    organization_id: \"{{services['api.organization_id']}}\"\n    solution_id: \"{{services['api.solution_id']}}\"\nspec:\n  sidecars:\n    cloud:\n  payload:\n    key: \"Project1\"\n    name: \"My Workspace Name\"\n    description: \"Workspace for solution\"\n    solution:\n      solutionId: \"{{services['api.solution_id']}}\"\n    useDedicatedEventHubNamespace: true\n    sendScenarioMetadataToEventHub: true\n    sendInputToDataWarehouse: true\n    sendScenarioRunToEventHub: true\n    additionalData:\n      webApp:\n        solution:\n          runTemplateFilter:\n          defaultRunTemplateDataset: null\n        charts:\n          workspaceId:\n          logInWithUserCredentials: false\n          scenarioViewIframeDisplayRatio: 4.514285714\n          dashboardsViewIframeDisplayRatio: 1.610062893\n          useWebappTheme: true\n          dashboardsView:\n          scenarioView:\n        menu:\n          supportUrl: 'https://support.cosmotech.com'\n          organizationUrl: 'https://cosmotech.com'\n          documentationUrl: 'https://portal.cosmotech.com/resources/platform-resources/web-app-user-guide'\n        datasetManager:\n    security:\n      default: none\n      accessControlList:\n        - id: user1@email.com\n          role: admin\n        - id: user2@email.com\n          role: editor\n        - id: user3@email.com\n          role: viewer\n</code></pre>"}]}